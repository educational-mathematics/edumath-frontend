<app-navbar></app-navbar>

<div class="header">
  <h2>Mis temas</h2>
  <button class="add" (click)="onOpenAdd()">➕ Añadir un tema</button>
</div>

@if (loaded && items.length === 0) {
  <div class="empty">
    <img src="assets/empty.png" alt="Sin temas" draggable="false">
    <p>No tienes temas. Añade uno para empezar</p>
  </div>
}

@if (items.length > 0) {
  <div class="grid">
    @for (t of items; track t.userTopicId) {
      <div class="card" (click)="enter(t)">
        <img [src]="t.coverUrl || 'assets/topic-placeholder.png'" alt="" draggable="false">
        <div class="title">{{ t.title }}</div>
        <div class="progress">
          <div class="bar" [style.width.%]="t.progressPct"></div>
        </div>
        <div class="pct">{{ t.progressPct }}%</div>
      </div>
    }
  </div>
}

@if (showAdd) {
  <app-add-topic-dialog
    [open]="true"
    [alreadyAddedIds]="alreadyAddedIds"
    (picked)="onPickTopic($event)"
    (canceled)="onCancelAdd()">
  </app-add-topic-dialog>
}
